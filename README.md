# Plant Village Blueberry Dataset

[![License: CC BY 4.0](https://img.shields.io/badge/License-CC%20BY%204.0-lightgrey.svg)](https://creativecommons.org/licenses/by/4.0/)
[![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)]()

Blueberry leaf classification and detection dataset from Plant Village, standardized for classification and object detection tasks.

## TL;DR

- **Task**: Classification (two classes: `healthy`, `background_without_leaves`) and object detection
- **Modality**: RGB images
- **Platform**: Ground/field
- **Real/Synthetic**: Real
- **Images**: 5,290 images (3,004 healthy blueberries, 2,286 backgrounds)
- **Annotations**: 6,676 bounding boxes (blueberries only)
- **Resolution**: 256×256 pixels
- **Format**: COCO JSON, CSV per-image
- **License**: CC BY 4.0
- **Citation**: See below

## Table of Contents

- [Download](#download)
- [Dataset Structure](#dataset-structure)
- [Sample Images](#sample-images)
- [Annotation Schema](#annotation-schema)
- [Stats and Splits](#stats-and-splits)
- [Quick Start](#quick-start)
- [Evaluation and Baselines](#evaluation-and-baselines)
- [Datasheet](#datasheet)
- [Known Issues and Caveats](#known-issues-and-caveats)
- [License](#license)
- [Citation](#citation)
- [Changelog](#changelog)
- [Contact](#contact)

## Download

**Original dataset**: This repo hosts structure and conversion scripts only; place the downloaded folders under this directory.

**Original data location**: The original data files are preserved in `data/origin/` directory for reference:
- `data/origin/Blueberry___healthy/`: Original blueberry images and annotations
- `data/origin/Background_without_leaves/`: Original background images
- `data/origin/all/`: Original dataset split files
- `data/origin/leaf_groups.json`: Original metadata file

**Local license file**: See `LICENSE` file in the root directory.

## Dataset Structure

This dataset follows the standardized dataset structure specification with subcategory organization:

```
blueberries/
├── healthy/              # Healthy blueberry leaves
│   ├── csv/              # CSV annotations per image
│   ├── json/             # JSON annotations per image
│   └── images/           # Healthy images
├── background/           # Background without leaves
│   ├── csv/              # CSV annotations per image
│   ├── json/             # JSON annotations (if available)
│   └── images/           # Background images
├── labelmap.json        # Label mapping (healthy=1, background_without_leaves=2)
└── sets/                 # Dataset splits
    ├── train.txt
    ├── val.txt
    ├── test.txt
    ├── all.txt
    └── train_val.txt
├── annotations/          # COCO format JSON (generated)
│   ├── blueberries_instances_train.json
│   ├── blueberries_instances_val.json
│   └── blueberries_instances_test.json
├── data/                 # Original data directory (preserved for reference)
│   └── origin/
├── scripts/              # Conversion scripts
│   ├── optimize_structure.py  # Structure optimization script
│   └── convert_to_coco.py     # COCO conversion script
├── LICENSE
├── README.md
└── requirements.txt
```

- Splits: `blueberries/sets/train.txt`, `blueberries/sets/val.txt`, `blueberries/sets/test.txt` (and also `all.txt`, `train_val.txt`) list image basenames (no extension). If missing, all images are used.

## Sample Images

Below are example images for each category in this dataset. Paths are relative to this README location.

<table>
  <tr>
    <th>Category</th>
    <th>Sample</th>
  </tr>
  <tr>
    <td><strong>Healthy</strong></td>
    <td>
      <img src="blueberries/healthy/images/image_158.jpg" alt="Healthy blueberry leaf" width="260"/>
      <div align="center"><code>blueberries/healthy/images/image_158.jpg</code></div>
    </td>
  </tr>
  <tr>
    <td><strong>Background</strong></td>
    <td>
      <img src="blueberries/background/images/image_103.jpg" alt="Background without leaves" width="260"/>
      <div align="center"><code>blueberries/background/images/image_103.jpg</code></div>
    </td>
  </tr>
</table>

## Annotation Schema

### CSV format

Each image has a corresponding CSV file in `{subcategory}/csv/{image_name}.csv`:

```csv
#item,x,y,width,height,label
0,77,14,126,75,1
1,120,50,80,60,1
```

- For detection tasks, the CSV contains multiple bounding boxes with object-level annotations.
- For classification tasks, the CSV typically contains a full-image bounding box `[0, 0, width, height]` with the label corresponding to the subcategory.
- **Coordinates**: `x, y` are top-left corner (pixels)
- **Dimensions**: `width, height` are in pixels
- **Label**: `1` for healthy, `2` for background_without_leaves

### COCO format

The COCO JSON files are generated by `scripts/convert_to_coco.py`:

```json
{
  "info": {
    "year": 2025,
    "version": "1.0.0",
    "description": "Plant Village Blueberry train split",
    "url": "https://www.kaggle.com/datasets/abdallahalidev/plantvillage-dataset"
  },
  "images": [
    {
      "id": 1,
      "file_name": "blueberries/healthy/images/image_158.jpg",
      "width": 256,
      "height": 256
    }
  ],
  "annotations": [
    {
      "id": 1,
      "image_id": 1,
      "category_id": 1,
      "bbox": [77, 14, 126, 75],
      "area": 9450,
      "iscrowd": 0
    }
  ],
  "categories": [
    {"id": 1, "name": "healthy", "supercategory": "blueberry"},
    {"id": 2, "name": "background_without_leaves", "supercategory": "blueberry"}
  ]
}
```

### Label maps

The `blueberries/labelmap.json` file defines the category mapping:

```json
[
  {"object_id": 0, "label_id": 0, "keyboard_shortcut": "0", "object_name": "background"},
  {"object_id": 1, "label_id": 1, "keyboard_shortcut": "1", "object_name": "healthy"},
  {"object_id": 2, "label_id": 2, "keyboard_shortcut": "2", "object_name": "background_without_leaves"}
]
```

## Stats and Splits

### Image counts

| Category | Train | Val | Test | Total |
|----------|-------|-----|------|-------|
| Healthy | ~182 | ~57 | ~229 | 3,004 |
| Background | ~0 | ~0 | ~0 | 2,286 |
| **Total** | **~182** | **~57** | **~229** | **5,290** |

### Annotations

- **Healthy**: 6,676 bounding boxes (object detection annotations)
- **Background**: Full-image bounding boxes for classification (no object-level annotations)

Splits provided via `blueberries/sets/*.txt`. You may define your own splits by editing those files.

## Quick Start

### Using COCO API

```python
from pycocotools.coco import COCO
import matplotlib.pyplot as plt

# Load annotations
coco = COCO('annotations/blueberries_instances_train.json')

# Get image IDs
img_ids = coco.getImgIds()
print(f"Number of images: {len(img_ids)}")

# Get annotation IDs for first image
ann_ids = coco.getAnnIds(imgIds=img_ids[0])
anns = coco.loadAnns(ann_ids)
print(f"Number of annotations: {len(anns)}")
```

### Converting to COCO format

If you need to regenerate the COCO JSON files:

```bash
python scripts/convert_to_coco.py --root . --out annotations --splits train val test
```

### Dependencies

**Required**:
- Python 3.7+
- Pillow>=9.5

**Optional** (for COCO API):
- pycocotools>=2.0.7

Install with:
```bash
pip install -r requirements.txt
```

## Evaluation and Baselines

**Primary metric**: mAP@[.50:.95]

No baseline results available yet. Contributions welcome!

## Datasheet

### Motivation

This dataset was created for blueberry leaf detection and classification tasks, derived from the Plant Village dataset. It has been standardized for object detection tasks.

### Composition

- **Blueberries**: 3,004 images with 6,676 bounding box annotations
- **Backgrounds**: 2,286 images without annotations (negative samples)
- **Image format**: JPG/PNG
- **Image size**: 256×256 pixels

### Collection Process

Images were collected from Plant Village dataset and processed for object detection tasks. Original images were resized to 256×256 pixels.

### Preprocessing

- Images standardized to 256×256 pixels
- Annotations converted from JSON to CSV format
- Dataset reorganized to standard structure

### Distribution

Dataset is distributed under CC BY 4.0 license. See LICENSE file for details.

### Maintenance

This dataset is maintained as part of the standardized dataset collection. Issues and contributions are welcome.

## Known Issues and Caveats

1. **File naming**: Original filenames were renamed to `image (XXX).JPG` format. Original filenames are preserved in JSON metadata as `pvc_filename` field.

2. **Background images**: Background category images have no annotations (empty CSV files).

3. **Split files**: The original split files in `all/` directory reference original filenames. The reorganized splits in `{category}/sets/` use the new filenames.

4. **Image format**: Mixed JPG/JPG extensions (uppercase and lowercase). The conversion script handles both.

5. **Coordinate system**: Bounding boxes use top-left corner (x, y) with width and height in pixels.

## License

This dataset is released under the **Creative Commons Attribution 4.0 International (CC BY 4.0)** license.

**You are free to**:
- Share — copy and redistribute the material in any medium or format
- Adapt — remix, transform, and build upon the material for any purpose, even commercially

**Under the following terms**:
- Attribution — You must give appropriate credit, provide a link to the license, and indicate if changes were made

See the `LICENSE` file for the full license text.

**Note**: Check the original Plant Village dataset terms and cite appropriately.

## Citation

If you use this dataset, please cite:

```bibtex
@dataset{plant_village_blueberry_2025,
  title={Plant Village Blueberry Dataset},
  author={Plant Village},
  year={2025},
  url={},
  license={CC BY 4.0}
}
```

**Original Plant Village citation** (if applicable):
```bibtex
@article{plant_village,
  title={Plant Village Dataset},
  author={Hughes, David and Salathé, Marcel},
  journal={},
  year={2015}
}
```

## Changelog

- **V1.1.0** (2025-12-14): Optimized structure to subcategory organization
  - Reorganized to subcategory structure: `blueberries/healthy/` and `blueberries/background/`
  - Unified `labelmap.json` at category level
  - Unified `sets/` directory at category level
  - Updated conversion scripts to support new structure
  - Updated documentation
- **V1.0.0** (2025-12-14): Initial standardized structure and COCO conversion utility
  - Reorganized dataset to standard structure
  - Created CSV annotations from JSON
  - Generated COCO format annotations
  - Added conversion scripts

## Contact

**Maintainers**: Dataset maintainers

**Original authors**: Plant Village team

**Source**: Plant Village dataset
